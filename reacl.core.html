<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>reacl.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Reacl 0.6.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>reacl</span></div></div></li><li class="depth-2 branch current"><a href="reacl.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="reacl.dom.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dom</span></div></a></li><li class="depth-2"><a href="reacl.lens.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lens</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="reacl.core.html#var--.3EKeepState"><div class="inner"><span>-&gt;KeepState</span></div></a></li><li class="depth-1"><a href="reacl.core.html#var--.3EState"><div class="inner"><span>-&gt;State</span></div></a></li><li class="depth-1"><a href="reacl.core.html#var-class"><div class="inner"><span>class</span></div></a></li><li class="depth-1"><a href="reacl.core.html#var-defclass"><div class="inner"><span>defclass</span></div></a></li><li class="depth-1"><a href="reacl.core.html#var-embed"><div class="inner"><span>embed</span></div></a></li><li class="depth-1"><a href="reacl.core.html#var-event-handler"><div class="inner"><span>event-handler</span></div></a></li><li class="depth-1"><a href="reacl.core.html#var-instantiate-toplevel"><div class="inner"><span>instantiate-toplevel</span></div></a></li><li class="depth-1"><a href="reacl.core.html#var-KeepState"><div class="inner"><span>KeepState</span></div></a></li><li class="depth-1"><a href="reacl.core.html#var-map-.3EKeepState"><div class="inner"><span>map-&gt;KeepState</span></div></a></li><li class="depth-1"><a href="reacl.core.html#var-map-.3EState"><div class="inner"><span>map-&gt;State</span></div></a></li><li class="depth-1"><a href="reacl.core.html#var-react-class"><div class="inner"><span>react-class</span></div></a></li><li class="depth-1"><a href="reacl.core.html#var-render-component"><div class="inner"><span>render-component</span></div></a></li><li class="depth-1"><a href="reacl.core.html#var-return"><div class="inner"><span>return</span></div></a></li><li class="depth-1"><a href="reacl.core.html#var-send-message.21"><div class="inner"><span>send-message!</span></div></a></li><li class="depth-1"><a href="reacl.core.html#var-set-state.21"><div class="inner"><span>set-state!</span></div></a></li><li class="depth-1"><a href="reacl.core.html#var-State"><div class="inner"><span>State</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">reacl.core</h2><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var--.3EKeepState"><h3>-&gt;KeepState</h3><div class="usage"><code>(-&gt;KeepState)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/active-group/reacl/blob/master/src/reacl/core.cljs#L245">view source</a></div></div><div class="public anchor" id="var--.3EState"><h3>-&gt;State</h3><div class="usage"><code>(-&gt;State app-state local-state)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/active-group/reacl/blob/master/src/reacl/core.cljs#L258">view source</a></div></div><div class="public anchor" id="var-class"><h3>class</h3><h4 class="type">macro</h4><div class="usage"><code>(class ?name &amp; ?stuff)</code></div><div class="doc"><div class="markdown"><p>Create a Reacl class.</p><p>This is a regular React class, with some convenience added - binding of <code>this</code>, application state, parameters etc - and implementing Reacl-specific protocols, particularly for event handling.</p><p>The syntax is</p>
<pre><code>(reacl.core/class &lt;name&gt; [&lt;this-name&gt; [&lt;app-state-name&gt; [&lt;local-state-name&gt;]]] [&lt;param&gt; ...]
  render &lt;renderer-exp&gt;
  [initial-state &lt;initial-state-exp&gt;]
  [local [&lt;local-name&gt; &lt;local-expr&gt;]]
  [handle-message &lt;messager-handler-exp&gt;]
  [&lt;lifecycle-method-name&gt; &lt;lifecycle-method-exp&gt; ...])
</code></pre><p><code>&lt;name&gt;</code> is a name for the class, for debugging purposes.</p><p>A number of names are bound in the various expressions in the body of reacl.core/class:</p>
<ul>
  <li><code>&lt;this-name&gt;</code> is bound to the component object itself</li>
  <li><code>&lt;app-state-name&gt;</code> is bound to the global application state</li>
  <li><code>&lt;local-state-name&gt;</code> is bound to the componnet-local state</li>
  <li>the <code>&lt;param&gt;</code> &hellip; names are the explicit arguments of instantiations</li>
</ul><p>A <code>local</code> clause allows binding additional local variables upon instantiation. The syntax is analogous to <code>let</code>.</p><p><code>&lt;renderer-exp&gt;</code> is an expression that renders the component, and hence must return a virtual dom node.</p><p>The <code>handle-message</code> function accepts a message sent to the component via <a href="reacl.core.html#var-send-message.21">reacl.core/send-message!</a>. It&rsquo;s expected to return a value specifying a new application state and/or component-local state, via <a href="reacl.core.html#var-return">reacl.core/return</a>.</p><p>A lifecycle method can be one of:</p><p><code>component-will-mount</code> <code>component-did-mount</code>  <code>component-will-receive-props</code> <code>should-component-update?</code>  <code>component-will-update</code> <code>component-did-update</code> <code>component-will-unmount</code></p><p>These correspond to React&rsquo;s lifecycle methods, see here:</p><p><a href="http://facebook.github.io/react/docs/component-specs.html">http://facebook.github.io/react/docs/component-specs.html</a></p><p>Each right-hand-side <code>&lt;lifecycle-method-exp&gt;</code>s should evaluate to a function. This function&rsquo;s argument is always the component. The remaining arguments are as for React.</p><p>Example:</p>
<pre><code>(defrecord New-text [text])
(defrecord Submit [])

(reacl/defclass to-do-app
  this todos local-state []
  render
  (dom/div
   (dom/h3 &quot;TODO&quot;)
   (dom/div (map-indexed (fn [i todo]
                           (dom/keyed (str i) (to-do-item this (lens/at-index i))))
                         todos))
   (dom/form
    {:onSubmit (fn [e _]
                 (.preventDefault e)
                 (reacl/send-message! this (Submit.)))}
    (dom/input {:onChange (fn [e]
                            (reacl/send-message! this
                                                 (New-text. (.. e -target -value))))
                :value local-state})
    (dom/button
     (str &quot;Add #&quot; (+ (count todos) 1)))))

  initial-state &quot;&quot;

  handle-message
  (fn [msg]
    (cond
     (instance? New-text msg)
     (reacl/return :local-state (:text msg))

     (instance? Submit msg)
     (reacl/return :local-state &quot;&quot;
                   :app-state (concat todos [(Todo. local-state false)])))))
</code></pre></div></div><div class="src-link"><a href="http://github.com/active-group/reacl/blob/master/src/reacl/core.clj#L19">view source</a></div></div><div class="public anchor" id="var-defclass"><h3>defclass</h3><h4 class="type">macro</h4><div class="usage"><code>(defclass ?name &amp; ?stuff)</code></div><div class="doc"><div class="markdown"><p>Define a Reacl class, see <a href="reacl.core.html#var-class">class</a> for documentation.</p><p>The syntax is</p>
<pre><code>(reacl.core/defclass &lt;name&gt; &lt;app-state&gt; [&lt;param&gt; ...]
  render &lt;renderer-exp&gt;
  [initial-state &lt;initial-state-exp&gt;]
  [&lt;lifecycle-method-name&gt; &lt;lifecycle-method-exp&gt; ...]
  [handle-message &lt;messager-handler-exp&gt;]

  &lt;event-handler-name&gt; &lt;event-handler-exp&gt; ...)
</code></pre><p>This expands to this:</p>
<pre><code>(def &lt;name&gt;
  (reacl.core/class &lt;name&gt; &lt;app-state&gt; [&lt;param&gt; ...]
    render &lt;renderer-exp&gt;
    [initial-state &lt;initial-state-exp&gt;]
    [&lt;lifecycle-method-name&gt; &lt;lifecycle-method-exp&gt; ...]
    [handle-message &lt;messager-handler-exp&gt;]

    &lt;event-handler-name&gt; &lt;event-handler-exp&gt; ...))
</code></pre></div></div><div class="src-link"><a href="http://github.com/active-group/reacl/blob/master/src/reacl/core.clj#L222">view source</a></div></div><div class="public anchor" id="var-embed"><h3>embed</h3><div class="usage"><code>(embed clazz parent app-state app-state-callback &amp; args)</code></div><div class="doc"><div class="markdown"><p>Embed a Reacl component.</p><p>This creates a component with its own application state that can be embedded in a surrounding application. Any changes to the app state lead to the callback being invoked.</p>
<ul>
  <li><code>clazz</code> is the Reacl class.</li>
  <li><code>parent</code> is the component from which the Reacl component is instantiated.</li>
  <li><code>app-state</code> is the application state.</li>
  <li><code>app-state-callback</code> is a function called with a new app state on changes.</li>
  <li><code>args</code> are the arguments to the component.</li>
</ul></div></div><div class="src-link"><a href="http://github.com/active-group/reacl/blob/master/src/reacl/core.cljs#L230">view source</a></div></div><div class="public anchor" id="var-event-handler"><h3>event-handler</h3><div class="usage"><code>(event-handler f)</code></div><div class="doc"><div class="markdown"><p>Create a Reacl event handler from a function.</p><p><code>f</code> must be a function that returns a return value created by <a href="reacl.core.html#var-return">reacl.core/return</a>, with a new application state and/or component-local state.</p><p><a href="reacl.core.html#var-event-handler">reacl.core/event-handler</a> turns that function <code>f</code> into an event handler, that is, a function that sets the new application state and/or component-local state. <code>f</code> gets passed any argument the event handler gets passed, plus, as its last argument, the component-local state.</p><p>This example event handler can be used with onSubmit, for example:</p>
<pre><code>(reacl/event-handler
 (fn [e _ text]
   (.preventDefault e)
   (reacl/return :app-state (concat todos [{:text text :done? false}])
                 :local-state &quot;&quot;)))
</code></pre><p>Note that <code>text</code> is the component-local state.</p></div></div><div class="src-link"><a href="http://github.com/active-group/reacl/blob/master/src/reacl/core.cljs#L293">view source</a></div></div><div class="public anchor" id="var-instantiate-toplevel"><h3>instantiate-toplevel</h3><div class="usage"><code>(instantiate-toplevel clazz app-state &amp; args)</code></div><div class="doc"><div class="markdown"><p>Instantiate a Reacl component at the top level.</p>
<ul>
  <li><code>clazz</code> is the Reacl class.</li>
  <li><code>app-state</code> is the application state</li>
  <li><code>args</code> are the arguments to the component.</li>
</ul></div></div><div class="src-link"><a href="http://github.com/active-group/reacl/blob/master/src/reacl/core.cljs#L206">view source</a></div></div><div class="public anchor" id="var-KeepState"><h3>KeepState</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/active-group/reacl/blob/master/src/reacl/core.cljs#L249">view source</a></div></div><div class="public anchor" id="var-map-.3EKeepState"><h3>map-&gt;KeepState</h3><div class="usage"><code>(map-&gt;KeepState G__5080)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/active-group/reacl/blob/master/src/reacl/core.cljs#L245">view source</a></div></div><div class="public anchor" id="var-map-.3EState"><h3>map-&gt;State</h3><div class="usage"><code>(map-&gt;State G__5087)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/active-group/reacl/blob/master/src/reacl/core.cljs#L258">view source</a></div></div><div class="public anchor" id="var-react-class"><h3>react-class</h3><div class="usage"><code>(react-class clazz)</code></div><div class="doc"><div class="markdown"><p>Extract the React class from a Reacl class.</p></div></div><div class="src-link"><a href="http://github.com/active-group/reacl/blob/master/src/reacl/core.cljs#L116">view source</a></div></div><div class="public anchor" id="var-render-component"><h3>render-component</h3><div class="usage"><code>(render-component element clazz app-state &amp; args)</code></div><div class="doc"><div class="markdown"><p>Instantiate and render a component into the DOM.</p>
<ul>
  <li><code>element</code> is the DOM element</li>
  <li><code>clazz</code> is the Reacl clazz</li>
  <li><code>app-state</code> is the application state</li>
  <li><code>args</code> are the arguments of the component.</li>
</ul></div></div><div class="src-link"><a href="http://github.com/active-group/reacl/blob/master/src/reacl/core.cljs#L215">view source</a></div></div><div class="public anchor" id="var-return"><h3>return</h3><div class="usage"><code>(return &amp; args)</code></div><div class="doc"><div class="markdown"><p>Return state from a Reacl event handler.</p><p>Has two optional keyword arguments:</p>
<ul>
  <li><code>:app-state</code> is for a new app state.</li>
  <li><code>:local-state</code> is for a new component-local state.</li>
</ul><p>A state can be set to nil. To keep a state unchanged, do not specify that option, or specify the value <a href="null">reacl.core/keep-state</a>.</p></div></div><div class="src-link"><a href="http://github.com/active-group/reacl/blob/master/src/reacl/core.cljs#L265">view source</a></div></div><div class="public anchor" id="var-send-message.21"><h3>send-message!</h3><div class="usage"><code>(send-message! comp msg)</code></div><div class="doc"><div class="markdown"><p>Send a message to a Reacl component.</p></div></div><div class="src-link"><a href="http://github.com/active-group/reacl/blob/master/src/reacl/core.cljs#L341">view source</a></div></div><div class="public anchor" id="var-set-state.21"><h3>set-state!</h3><div class="usage"><code>(set-state! component ps)</code></div><div class="doc"><div class="markdown"><p>Set the app state and component state according to what return returned.</p></div></div><div class="src-link"><a href="http://github.com/active-group/reacl/blob/master/src/reacl/core.cljs#L285">view source</a></div></div><div class="public anchor" id="var-State"><h3>State</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/active-group/reacl/blob/master/src/reacl/core.cljs#L262">view source</a></div></div></div></body></html>