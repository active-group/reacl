<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>reacl2.test-util documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Reacl</span> <span class="project-version">2.0.2-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>reacl</span></div></div></li><li class="depth-2 branch"><a href="reacl.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="reacl.dom.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dom</span></div></a></li><li class="depth-2"><a href="reacl.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>reacl2</span></div></div></li><li class="depth-2 branch"><a href="reacl2.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="reacl2.dom.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dom</span></div></a></li><li class="depth-2 branch current"><a href="reacl2.test-util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test-util</span></div></a></li><li class="depth-2"><a href="reacl2.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="reacl2.test-util.html#var--.3Epath-element"><div class="inner"><span>-&gt;path-element</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var--.3Epath-element-type"><div class="inner"><span>-&gt;path-element-type</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var--.3EPathElement"><div class="inner"><span>-&gt;PathElement</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-after"><div class="inner"><span>after</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-create-renderer"><div class="inner"><span>create-renderer</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-descend-into-element"><div class="inner"><span>descend-into-element</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-dom.3D.3F"><div class="inner"><span>dom=?</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-element-children"><div class="inner"><span>element-children</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-element-has-type.3F"><div class="inner"><span>element-has-type?</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-handle-message"><div class="inner"><span>handle-message</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-hiccup-matches.3F"><div class="inner"><span>hiccup-matches?</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-instantiate.26mount"><div class="inner"><span>instantiate&amp;mount</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-invoke-callback"><div class="inner"><span>invoke-callback</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-map-.3EPathElement"><div class="inner"><span>map-&gt;PathElement</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-no-check"><div class="inner"><span>no-check</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-path-element-matches.3F"><div class="inner"><span>path-element-matches?</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-PathElement"><div class="inner"><span>PathElement</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-render.21"><div class="inner"><span>render!</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-render-.3Ehiccup"><div class="inner"><span>render-&gt;hiccup</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-render-output"><div class="inner"><span>render-output</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-render-shallowly"><div class="inner"><span>render-shallowly</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-render-to-text"><div class="inner"><span>render-to-text</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-rendered-children"><div class="inner"><span>rendered-children</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-simulate"><div class="inner"><span>simulate</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-the-app-state"><div class="inner"><span>the-app-state</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-the-dom"><div class="inner"><span>the-dom</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-the-local-state"><div class="inner"><span>the-local-state</span></div></a></li><li class="depth-1"><a href="reacl2.test-util.html#var-with-testing-class*"><div class="inner"><span>with-testing-class*</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">reacl2.test-util</h1><div class="doc"><div class="markdown"><p>Various testing utilities for Reacl.</p></div></div><div class="public anchor" id="var--.3Epath-element"><h3>-&gt;path-element</h3><div class="usage"><code>(-&gt;path-element x)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var--.3Epath-element-type"><h3>-&gt;path-element-type</h3><div class="usage"><code>(-&gt;path-element-type x)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var--.3EPathElement"><h3>-&gt;PathElement</h3><div class="usage"><code>(-&gt;PathElement type props-predicate)</code></div><div class="doc"><div class="markdown"><p>Positional factory function for reacl2.test-util/PathElement.</p></div></div></div><div class="public anchor" id="var-after"><h3>after</h3><div class="usage"><code>(after message &amp; checks)</code></div><div class="doc"><div class="markdown"><p>Creates an interaction the sends the given message to the tested component, and performs the given checks afterwards. Should be used in the context a <a href="null">testing-class*</a> call.</p></div></div></div><div class="public anchor" id="var-create-renderer"><h3>create-renderer</h3><div class="usage"><code>(create-renderer)</code></div><div class="doc"><div class="markdown"><p>Create a shallow renderer for testing</p></div></div></div><div class="public anchor" id="var-descend-into-element"><h3>descend-into-element</h3><div class="usage"><code>(descend-into-element element path)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-dom.3D.3F"><h3>dom=?</h3><div class="usage"><code>(dom=? el1 el2)</code></div><div class="doc"><div class="markdown"><p>Compare two React DOM elements for equality.</p></div></div></div><div class="public anchor" id="var-element-children"><h3>element-children</h3><div class="usage"><code>(element-children element)</code></div><div class="doc"><div class="markdown"><p>Get the children of a rendered element as a vector.</p></div></div></div><div class="public anchor" id="var-element-has-type.3F"><h3>element-has-type?</h3><div class="usage"><code>(element-has-type? element tag)</code></div><div class="doc"><div class="markdown"><p>Check if an element has a given type, denoted by <code>tag</code>.</p>
<p><code>tag</code> may be a keyword or string with the name of a DOM element, or React or a Reacl class.</p></div></div></div><div class="public anchor" id="var-handle-message"><h3>handle-message</h3><div class="usage"><code>(handle-message cl app-state args local-state msg)</code></div><div class="doc"><div class="markdown"><p>Invoke the message handler of a Reacl element.</p>
<ul>
  <li><code>cl</code> is the Reacl class.</li>
  <li><code>app-state</code> is the app state</li>
  <li><code>local-state</code> is the local state</li>
  <li><code>msg</code> is the message.</li>
</ul>
<p>This returns a pair <code>[cmp ret]</code> where:</p>
<ul>
  <li><code>cmp</code> is the mock component used in the test</li>
  <li><code>ret</code> is a <code>Returned</code> record with <code>app-state</code>, <code>local-state</code>, and <code>actions</code> fields.</li>
</ul></div></div></div><div class="public anchor" id="var-hiccup-matches.3F"><h3>hiccup-matches?</h3><div class="usage"><code>(hiccup-matches? pattern data)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-instantiate.26mount"><h3>instantiate&amp;mount</h3><div class="usage"><code>(instantiate&amp;mount clazz &amp; args)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-invoke-callback"><h3>invoke-callback</h3><div class="usage"><code>(invoke-callback element callback event)</code></div><div class="doc"><div class="markdown"><p>Invoke a callback of an element.</p>
<p><code>callback</code> must a keyword naming the attribute (<code>onchange</code>).</p>
<p><code>event</code> must be a React event - don’t forget the �#js {…}`</p></div></div></div><div class="public anchor" id="var-map-.3EPathElement"><h3>map-&gt;PathElement</h3><div class="usage"><code>(map-&gt;PathElement G__3568)</code></div><div class="doc"><div class="markdown"><p>Factory function for reacl2.test-util/PathElement, taking a map of keywords to field values.</p></div></div></div><div class="public anchor" id="var-no-check"><h3>no-check</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>An empty check that does nothing.</p></div></div></div><div class="public anchor" id="var-path-element-matches.3F"><h3>path-element-matches?</h3><div class="usage"><code>(path-element-matches? path-element element)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-PathElement"><h3>PathElement</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-render.21"><h3>render!</h3><div class="usage"><code>(render! renderer el)</code></div><div class="doc"><div class="markdown"><p>Render an element into a renderer.</p></div></div></div><div class="public anchor" id="var-render-.3Ehiccup"><h3>render-&gt;hiccup</h3><div class="usage"><code>(render-&gt;hiccup element)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-render-output"><h3>render-output</h3><div class="usage"><code>(render-output renderer)</code></div><div class="doc"><div class="markdown"><p>Get the output of rendering.</p></div></div></div><div class="public anchor" id="var-render-shallowly"><h3>render-shallowly</h3><div class="usage"><code>(render-shallowly element)</code><code>(render-shallowly element renderer)</code></div><div class="doc"><div class="markdown"><p>Render an element shallowly.</p></div></div></div><div class="public anchor" id="var-render-to-text"><h3>render-to-text</h3><div class="usage"><code>(render-to-text dom)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-rendered-children"><h3>rendered-children</h3><div class="usage"><code>(rendered-children element)</code></div><div class="doc"><div class="markdown"><p>Retrieve children from a rendered element.</p></div></div></div><div class="public anchor" id="var-simulate"><h3>simulate</h3><div class="usage"><code>(simulate f &amp; checks)</code></div><div class="doc"><div class="markdown"><p>Creates an interaction, that will call <code>f</code> with the React.addons.TestUtils.Simulate object and the dom node of the tested component. The simulator object has methods like <code>click</code> that you can call to dispatch a DOM event. The given checks are performed afterwards.</p></div></div></div><div class="public anchor" id="var-the-app-state"><h3>the-app-state</h3><div class="usage"><code>(the-app-state f)</code></div><div class="doc"><div class="markdown"><p>Create a check on the app-state, by calling the given function f with the app-state at that time. Should be used in the context a <a href="null">testing-class*</a> call.</p></div></div></div><div class="public anchor" id="var-the-dom"><h3>the-dom</h3><div class="usage"><code>(the-dom f)</code></div><div class="doc"><div class="markdown"><p>Create a check on the dom rendered by a component, by calling the given function f with the dom-node at that time. Should be used in the context a <a href="null">testing-class*</a> call.</p></div></div></div><div class="public anchor" id="var-the-local-state"><h3>the-local-state</h3><div class="usage"><code>(the-local-state f)</code></div><div class="doc"><div class="markdown"><p>Create a check on the local-state, by calling the given function f with the local-state at that time. Should be used in the context a <a href="null">testing-class*</a> call.</p></div></div></div><div class="public anchor" id="var-with-testing-class*"><h3>with-testing-class*</h3><div class="usage"><code>(with-testing-class* [clazz &amp; args] initial-check &amp; interactions)</code></div><div class="doc"><div class="markdown"><p>Instantiates the given class with an initial app-state and arguments, performs the initial-check and all given interactions.</p>
<p>A ‘check’ is a function taking a function to retrieve the current app-state and a function retrieving the current dom node as rendered by the class - see <a href="reacl2.test-util.html#var-the-app-state">the-app-state</a> and <a href="reacl2.test-util.html#var-the-dom">the-dom</a> to create usual checks.</p>
<p>An ‘interaction’ is a function taking a function to send a message to the component, and returning a sequence of checks - see <a href="reacl2.test-util.html#var-after">after</a> to create a usual interaction.</p>
<p>Note that check implementations should usually contain clojure-test assertions. A common pattern could be:</p>
<p>(with-testing-class* [my-class nil “en”]  (the-dom #(is (= “Hello World” (.-innerText %))))  (after (set-lang-message “de”)  (the-dom #(is (= “Hallo Welt” (.-innerText %))))))</p></div></div></div></div></body></html>